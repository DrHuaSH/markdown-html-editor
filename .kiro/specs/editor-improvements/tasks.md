# 实施计划：编辑器改进

## 概述

对现有Markdown-HTML双向编辑器进行四个关键改进：移除内容联动、修复滚动位置、添加示例内容和修复按钮功能。

## 任务

- [x] 1. 移除HTML和Markdown模式间的内容联动
  - 修改EditorContext以移除自动同步逻辑
  - 更新模式切换时不触发内容同步
  - 保留手动转换功能供用户主动使用
  - _需求：1.1, 1.2, 1.3, 1.4_

- [ ]* 1.1 编写内容独立性的属性测试
  - **属性 1：内容独立性**
  - **验证：需求 1.1, 1.2, 1.3**

- [x] 2. 修复HTML可视化编辑器的滚动位置保持
  - [x] 2.1 实现滚动位置和选择状态的保存机制
    - 在内容更新前记录当前滚动位置
    - 保存文本选择范围和光标位置
    - _需求：2.1, 2.3_

  - [x] 2.2 实现异步位置恢复机制
    - 使用requestAnimationFrame确保DOM更新完成
    - 实现防抖机制避免频繁操作
    - _需求：2.2, 2.4_

  - [ ]* 2.3 编写滚动位置保持的属性测试
    - **属性 2：滚动位置保持**
    - **验证：需求 2.1, 2.2, 2.3**

- [x] 3. 添加HTML编辑界面的丰富示例内容
  - [x] 3.1 创建AWS风格的示例HTML内容
    - 设计包含渐变、阴影、动画的现代CSS样式
    - 创建功能展示卡片和交互元素
    - 添加响应式表格和状态徽章
    - _需求：3.2, 3.3, 3.4_

  - [x] 3.2 实现示例内容的自动加载逻辑
    - 检测HTML内容是否为空或默认内容
    - 在首次加载时自动设置示例内容
    - _需求：3.1, 3.5_

  - [ ]* 3.3 编写示例内容完整性的属性测试
    - **属性 3：示例内容完整性**
    - **验证：需求 3.1, 3.2, 3.3, 3.4, 3.5**

- [x] 4. 修复HTML编辑界面的工具栏按钮功能
  - [x] 4.1 修复保存按钮在HTML模式下的功能
    - 确保保存按钮能正确保存HTML内容
    - 更新按钮状态和反馈机制
    - _需求：4.1, 4.5_

  - [x] 4.2 修复.md和.html导出按钮功能
    - 修复.md按钮的HTML到Markdown转换和导出
    - 修复.html按钮的HTML文件导出功能
    - 确保按钮在HTML模式下正确响应
    - _需求：4.2, 4.3, 4.4_

  - [ ]* 4.3 编写按钮功能一致性的属性测试
    - **属性 4：按钮功能一致性**
    - **验证：需求 4.1, 4.2, 4.3, 4.4, 4.5**

- [x] 5. 增强手动转换功能
  - [x] 5.1 优化Toolbar组件的手动转换按钮
    - 提供清晰的转换方向指示
    - 添加转换成功的用户反馈
    - _需求：1.4_

  - [ ]* 5.2 编写手动转换正确性的属性测试
    - **属性 5：手动转换正确性**
    - **验证：需求 1.4**

- [x] 6. 集成测试和验证
  - [x] 6.1 实现完整的用户工作流测试
    - 测试模式切换和内容独立性
    - 验证滚动位置保持功能
    - 测试示例内容加载和按钮功能
    - _需求：所有需求_

  - [ ]* 6.2 编写跨模式兼容性测试
    - 验证改进后的功能在不同模式下的表现
    - 测试用户体验的一致性
    - _需求：所有需求_

- [x] 7. 最终检查点 - 确保所有改进功能正常工作
  - 确保所有测试通过，如有问题请询问用户

## 注意事项

- 标记为 `*` 的任务是可选的，可以跳过以实现更快的改进
- 每个任务都引用了具体的需求以确保可追溯性
- 重点关注用户体验的改善和功能的稳定性
- 保持现有功能的完整性，只修改需要改进的部分