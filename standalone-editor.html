<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown-HTML åŒå‘ç¼–è¾‘å™¨</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/marked@5.1.2/marked.min.js"></script>
    <script src="https://unpkg.com/turndown@7.1.2/dist/turndown.js"></script>
    <script src="https://unpkg.com/dompurify@3.0.5/dist/purify.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* AWS é£æ ¼æ ·å¼ */
        :root {
            --aws-primary: #232F3E;
            --aws-secondary: #FF9900;
            --aws-light: #F2F3F3;
        }
        
        .aws-button {
            padding: 1rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
        }
        
        .aws-button-primary {
            background-color: var(--aws-primary);
            color: white;
        }
        
        .aws-button-primary:hover {
            background-color: #1a252f;
        }
        
        .aws-button-secondary {
            background-color: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .aws-button-secondary:hover {
            background-color: #e5e7eb;
        }
        
        .editor-container {
            min-height: 600px;
        }
        
        .markdown-editor {
            width: 100%;
            height: 100%;
            padding: 16px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            min-height: 500px;
            resize: vertical;
            background-color: #fafafa;
            transition: border-color 0.2s ease;
        }
        
        .markdown-editor:focus {
            outline: none;
            border-color: var(--aws-secondary);
            background-color: white;
        }
        
        .html-editor {
            width: 100%;
            height: 100%;
            padding: 16px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            background-color: #fafafa;
            transition: border-color 0.2s ease;
        }
        
        .html-editor:focus {
            outline: none;
            border-color: var(--aws-secondary);
            background-color: white;
        }
        
        .preview-panel {
            /* é‡è¦ï¼šä¸è¦è¦†ç›–å†…å®¹çš„æ ·å¼ */
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
            color: inherit;
            position: relative;
        }
        
        .toolbar {
            background-color: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .bg-aws-light {
            background-color: var(--aws-light);
        }
        
        .text-aws-primary {
            color: var(--aws-primary);
        }
        
        .bg-aws-secondary {
            background-color: var(--aws-secondary);
        }
        
        /* Markdown æ¸²æŸ“æ ·å¼ */
        .markdown-content h1 { 
            font-size: 1.5rem; 
            font-weight: bold; 
            margin-bottom: 1rem; 
            margin-top: 1.5rem; 
        }
        .markdown-content h2 { 
            font-size: 1.25rem; 
            font-weight: bold; 
            margin-bottom: 0.75rem; 
            margin-top: 1.25rem; 
        }
        .markdown-content h3 { 
            font-size: 1.125rem; 
            font-weight: bold; 
            margin-bottom: 0.5rem; 
            margin-top: 1rem; 
        }
        .markdown-content p { 
            margin-bottom: 0.75rem; 
            line-height: 1.6; 
        }
        .markdown-content ul { 
            list-style-type: disc; 
            list-style-position: inside; 
            margin-bottom: 0.75rem; 
        }
        .markdown-content ol { 
            list-style-type: decimal; 
            list-style-position: inside; 
            margin-bottom: 0.75rem; 
        }
        .markdown-content li { 
            margin-bottom: 0.25rem; 
        }
        .markdown-content code { 
            background-color: #f3f4f6; 
            padding: 0.125rem 0.25rem; 
            border-radius: 0.25rem; 
            font-size: 0.875rem; 
            font-family: monospace; 
        }
        .markdown-content pre { 
            background-color: #f3f4f6; 
            padding: 0.75rem; 
            border-radius: 0.5rem; 
            overflow-x: auto; 
            margin-bottom: 0.75rem; 
        }
        .markdown-content blockquote { 
            border-left: 4px solid #d1d5db; 
            padding-left: 1rem; 
            font-style: italic; 
            margin-bottom: 0.75rem; 
        }
        .markdown-content strong { 
            font-weight: bold; 
        }
        .markdown-content em { 
            font-style: italic; 
        }
        .markdown-content a { 
            color: #2563eb; 
            text-decoration: underline; 
        }
        .markdown-content a:hover { 
            color: #1d4ed8; 
        }
        .markdown-content table { 
            border-collapse: collapse; 
            border: 1px solid #d1d5db; 
            margin-bottom: 0.75rem; 
            width: 100%;
        }
        .markdown-content th, .markdown-content td { 
            border: 1px solid #d1d5db; 
            padding: 0.75rem; 
        }
        .markdown-content th { 
            background-color: #f3f4f6; 
            font-weight: bold; 
        }
        
        /* å¸ƒå±€æ ·å¼ */
        .flex {
            display: flex;
        }
        .items-center {
            align-items: center;
        }
        .justify-between {
            justify-content: space-between;
        }
        .space-x-1 > * + * {
            margin-left: 0.25rem;
        }
        .space-x-2 > * + * {
            margin-left: 0.5rem;
        }
        .space-x-4 > * + * {
            margin-left: 1rem;
        }
        .grid {
            display: grid;
        }
        .grid-cols-1 {
            grid-template-columns: repeat(1, minmax(0, 1fr));
        }
        .gap-4 {
            gap: 1rem;
        }
        .h-full {
            height: 100%;
        }
        .w-8 {
            width: 2rem;
        }
        .h-8 {
            height: 2rem;
        }
        .rounded {
            border-radius: 0.25rem;
        }
        .rounded-lg {
            border-radius: 0.5rem;
        }
        .rounded-md {
            border-radius: 0.375rem;
        }
        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        .py-1\.5 {
            padding-top: 0.375rem;
            padding-bottom: 0.375rem;
        }
        .p-1 {
            padding: 0.25rem;
        }
        .text-sm {
            font-size: 0.875rem;
        }
        .text-lg {
            font-size: 1.125rem;
        }
        .text-xl {
            font-size: 1.25rem;
        }
        .font-medium {
            font-weight: 500;
        }
        .font-semibold {
            font-weight: 600;
        }
        .font-bold {
            font-weight: 700;
        }
        .text-white {
            color: white;
        }
        .text-gray-600 {
            color: #4b5563;
        }
        .bg-white {
            background-color: white;
        }
        .bg-gray-100 {
            background-color: #f3f4f6;
        }
        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .transition-all {
            transition: all 0.15s ease-in-out;
        }
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        .min-h-screen {
            min-height: 100vh;
        }
        .p-4 {
            padding: 1rem;
        }
        
        /* å¯è§†åŒ–ç¼–è¾‘å™¨æ ·å¼ */
        .preview-panel[contenteditable="true"] {
            cursor: text;
        }
        
        .preview-panel[contenteditable="true"]:focus {
            outline: 2px solid var(--aws-secondary);
            outline-offset: -2px;
        }
        
        .preview-panel[contenteditable="true"]:hover {
            border-color: var(--aws-secondary);
        }
        
        /* æ‹–æ‹½æ»šåŠ¨æ ·å¼ */
        .preview-panel {
            scroll-behavior: smooth;
        }
        
        .preview-panel::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }
        
        .preview-panel::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 6px;
        }
        
        .preview-panel::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 6px;
        }
        
        .preview-panel::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        .preview-panel::-webkit-scrollbar-corner {
            background: #f1f1f1;
        }
        
        /* é€‰æ‹©å®šä½æ ·å¼ */
        .selection-center {
            transition: box-shadow 0.3s ease;
        }
        
        .selection-center:focus {
            outline: none;
        }
        
        /* ç¼–è¾‘å·¥å…·æ æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .edit-toolbar button:hover {
            background-color: #f3f4f6 !important;
            border-color: var(--aws-secondary) !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .edit-toolbar button:active {
            background-color: #e5e7eb !important;
            transform: translateY(0);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (min-width: 1024px) {
            .lg\\:grid-cols-2 {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    </style>
</head>
<body class="bg-aws-light min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback, useEffect } = React;

        // è½¬æ¢å¼•æ“
        const ConversionEngine = {
            markdownToHtml: (markdown) => {
                try {
                    const html = marked.parse(markdown);
                    // ä¸ä½¿ç”¨DOMPurifyï¼Œä¿æŒåŸå§‹HTML
                    return html;
                } catch (error) {
                    console.error('Markdownè½¬æ¢é”™è¯¯:', error);
                    return '<p>è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥Markdownè¯­æ³•</p>';
                }
            },
            
            htmlToMarkdown: (html) => {
                try {
                    const turndownService = new TurndownService({
                        headingStyle: 'atx',
                        codeBlockStyle: 'fenced'
                    });
                    return turndownService.turndown(html);
                } catch (error) {
                    console.error('HTMLè½¬æ¢é”™è¯¯:', error);
                    return 'è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥HTMLè¯­æ³•';
                }
            }
        };

        // æ–‡ä»¶æ“ä½œ
        const FileOperations = {
            saveFile: (content, filename, type = 'text/plain') => {
                const blob = new Blob([content], { type });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            },
            
            loadFile: (file) => {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.onerror = reject;
                    reader.readAsText(file);
                });
            }
        };

        // å·¥å…·æ ç»„ä»¶
        const Toolbar = ({ mode, onModeChange, onSave, onLoad, onExport, markdownContent, htmlContent, setMarkdownContent, setHtmlContent }) => {
            const fileInputRef = React.useRef();

            const handleFileLoad = async (event) => {
                const file = event.target.files[0];
                if (file) {
                    try {
                        const content = await FileOperations.loadFile(file);
                        onLoad(content, file.name.endsWith('.html') ? 'html' : 'markdown');
                    } catch (error) {
                        alert('æ–‡ä»¶åŠ è½½å¤±è´¥: ' + error.message);
                    }
                }
            };

            return (
                <div className="toolbar">
                    <div className="flex items-center space-x-4">
                        <div className="flex items-center space-x-2">
                            <div className="w-8 h-8 bg-aws-secondary rounded flex items-center justify-center">
                                <span className="text-white font-bold text-sm">MD</span>
                            </div>
                            <h1 className="text-xl font-semibold text-aws-primary">
                                Markdown-HTMLç¼–è¾‘å™¨
                            </h1>
                        </div>
                        
                        <div className="flex items-center space-x-1 bg-gray-100 rounded-lg p-1">
                            <button
                                onClick={() => onModeChange('markdown')}
                                className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${
                                    mode === 'markdown' 
                                        ? 'bg-white text-aws-primary shadow-sm' 
                                        : 'text-gray-600 hover:text-aws-primary'
                                }`}
                            >
                                ğŸ“ Markdown
                            </button>
                            <button
                                onClick={() => onModeChange('html')}
                                className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${
                                    mode === 'html' 
                                        ? 'bg-white text-aws-primary shadow-sm' 
                                        : 'text-gray-600 hover:text-aws-primary'
                                }`}
                            >
                                ğŸŒ HTML
                            </button>
                        </div>
                    </div>

                    <div className="flex items-center space-x-2">
                        <button
                            onClick={() => fileInputRef.current?.click()}
                            className="aws-button aws-button-secondary"
                        >
                            ğŸ“ å¯¼å…¥
                        </button>
                        
                        <button
                            onClick={onSave}
                            className="aws-button aws-button-secondary"
                        >
                            ğŸ’¾ ä¿å­˜
                        </button>
                        
                        <button
                            onClick={onExport}
                            className="aws-button aws-button-primary"
                        >
                            ğŸ“¤ å¯¼å‡º
                        </button>
                        
                        {/* æ‰‹åŠ¨è½¬æ¢æŒ‰é’® */}
                        <button
                            onClick={() => {
                                if (mode === 'markdown') {
                                    const html = ConversionEngine.markdownToHtml(markdownContent);
                                    setHtmlContent(html);
                                    alert('å·²å°†Markdownè½¬æ¢ä¸ºHTMLï¼åˆ‡æ¢åˆ°HTMLæ¨¡å¼æŸ¥çœ‹ã€‚');
                                } else {
                                    const markdown = ConversionEngine.htmlToMarkdown(htmlContent);
                                    setMarkdownContent(markdown);
                                    alert('å·²å°†HTMLè½¬æ¢ä¸ºMarkdownï¼åˆ‡æ¢åˆ°Markdownæ¨¡å¼æŸ¥çœ‹ã€‚');
                                }
                            }}
                            className="aws-button aws-button-secondary"
                            title={mode === 'markdown' ? 'å°†å½“å‰Markdownè½¬æ¢ä¸ºHTML' : 'å°†å½“å‰HTMLè½¬æ¢ä¸ºMarkdown'}
                        >
                            ğŸ”„ è½¬æ¢
                        </button>
                        
                        <input
                            ref={fileInputRef}
                            type="file"
                            accept=".md,.html,.txt"
                            onChange={handleFileLoad}
                            style={{ display: 'none' }}
                        />
                    </div>
                </div>
            );
        };

        // Markdownç¼–è¾‘å™¨ç»„ä»¶
        const MarkdownEditor = ({ content, onChange }) => {
            const [previewContent, setPreviewContent] = useState('');

            useEffect(() => {
                const html = ConversionEngine.markdownToHtml(content);
                setPreviewContent(html);
            }, [content]);

            return (
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 h-full" style={{ minHeight: '600px' }}>
                    <div className="flex flex-col">
                        <h3 className="text-xl font-semibold mb-3 text-aws-primary">Markdown ç¼–è¾‘</h3>
                        <textarea
                            className="markdown-editor flex-1"
                            value={content}
                            onChange={(e) => onChange(e.target.value)}
                            placeholder="åœ¨è¿™é‡Œè¾“å…¥Markdownå†…å®¹..."
                            style={{
                                minHeight: '500px',
                                fontSize: '14px',
                                lineHeight: '1.5'
                            }}
                        />
                    </div>
                    <div className="flex flex-col">
                        <h3 className="text-xl font-semibold mb-3 text-aws-primary">å®æ—¶é¢„è§ˆ</h3>
                        <div 
                            className="markdown-content flex-1"
                            dangerouslySetInnerHTML={{ __html: previewContent }}
                            style={{
                                minHeight: '500px',
                                maxHeight: '700px',
                                overflowY: 'auto',
                                overflowX: 'auto',
                                border: '2px solid #d1d5db',
                                borderRadius: '8px',
                                padding: '16px',
                                backgroundColor: 'white'
                            }}
                        />
                    </div>
                </div>
            );
        };

        // HTMLç¼–è¾‘å™¨ç»„ä»¶
        const HTMLEditor = ({ content, onChange }) => {
            const [isUpdatingFromCode, setIsUpdatingFromCode] = useState(false);
            const [isUpdatingFromPreview, setIsUpdatingFromPreview] = useState(false);
            const [undoStack, setUndoStack] = useState([]);
            const [redoStack, setRedoStack] = useState([]);
            const [lastSavedContent, setLastSavedContent] = useState(content);
            const [saveTimeout, setSaveTimeout] = useState(null);
            const previewRef = React.useRef();
            const codeRef = React.useRef();

            // ä¿å­˜çŠ¶æ€åˆ°æ’¤é”€æ ˆ - ä½¿ç”¨é˜²æŠ–æœºåˆ¶
            const saveToUndoStack = useCallback((newContent) => {
                if (newContent !== lastSavedContent) {
                    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
                    if (saveTimeout) {
                        clearTimeout(saveTimeout);
                    }
                    
                    // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿä¿å­˜
                    const timeout = setTimeout(() => {
                        setUndoStack(prev => [...prev.slice(-19), lastSavedContent]); // ä¿æŒæœ€å¤š20ä¸ªçŠ¶æ€
                        setRedoStack([]); // æ¸…ç©ºé‡åšæ ˆ
                        setLastSavedContent(newContent);
                    }, 500); // 500ms é˜²æŠ–å»¶è¿Ÿ
                    
                    setSaveTimeout(timeout);
                }
            }, [lastSavedContent, saveTimeout]);

            // æ’¤é”€åŠŸèƒ½
            const handleUndo = useCallback(() => {
                if (undoStack.length > 0) {
                    const previousContent = undoStack[undoStack.length - 1];
                    setRedoStack(prev => [content, ...prev.slice(0, 19)]); // ä¿æŒæœ€å¤š20ä¸ªçŠ¶æ€
                    setUndoStack(prev => prev.slice(0, -1));
                    setLastSavedContent(previousContent);
                    onChange(previousContent);
                }
            }, [undoStack, content, onChange]);

            // é‡åšåŠŸèƒ½
            const handleRedo = useCallback(() => {
                if (redoStack.length > 0) {
                    const nextContent = redoStack[0];
                    setUndoStack(prev => [...prev, content]);
                    setRedoStack(prev => prev.slice(1));
                    setLastSavedContent(nextContent);
                    onChange(nextContent);
                }
            }, [redoStack, content, onChange]);
            // ä»ä»£ç æ›´æ–°é¢„è§ˆ - ä¿æŒæ»šåŠ¨ä½ç½®
            useEffect(() => {
                if (!isUpdatingFromPreview && previewRef.current) {
                    setIsUpdatingFromCode(true);
                    
                    // ä¿å­˜å½“å‰æ»šåŠ¨ä½ç½®å’Œé€‰æ‹©çŠ¶æ€
                    const scrollTop = previewRef.current.scrollTop;
                    const scrollLeft = previewRef.current.scrollLeft;
                    const selection = window.getSelection();
                    let selectionRange = null;
                    
                    // ä¿å­˜é€‰æ‹©èŒƒå›´
                    if (selection.rangeCount > 0) {
                        try {
                            selectionRange = selection.getRangeAt(0).cloneRange();
                        } catch (e) {
                            // å¿½ç•¥é€‰æ‹©ä¿å­˜é”™è¯¯
                        }
                    }
                    
                    // æ›´æ–°å†…å®¹
                    previewRef.current.innerHTML = content;
                    
                    // ä½¿ç”¨ requestAnimationFrame ç¡®ä¿DOMæ›´æ–°å®Œæˆåå†æ¢å¤ä½ç½®
                    requestAnimationFrame(() => {
                        if (previewRef.current) {
                            // æ¢å¤æ»šåŠ¨ä½ç½®
                            previewRef.current.scrollTop = scrollTop;
                            previewRef.current.scrollLeft = scrollLeft;
                            
                            // å°è¯•æ¢å¤é€‰æ‹©çŠ¶æ€
                            if (selectionRange) {
                                try {
                                    selection.removeAllRanges();
                                    selection.addRange(selectionRange);
                                } catch (e) {
                                    // å¿½ç•¥é€‰æ‹©æ¢å¤é”™è¯¯
                                }
                            }
                        }
                        
                        // å»¶è¿Ÿé‡ç½®æ›´æ–°æ ‡å¿—
                        setTimeout(() => setIsUpdatingFromCode(false), 50);
                    });
                }
            }, [content, isUpdatingFromPreview]);

            // å¤„ç†é¢„è§ˆåŒºåŸŸçš„ç¼–è¾‘
            const handlePreviewEdit = useCallback(() => {
                if (!isUpdatingFromCode && previewRef.current) {
                    setIsUpdatingFromPreview(true);
                    const newHtml = previewRef.current.innerHTML;
                    
                    // åªæœ‰å½“å†…å®¹çœŸæ­£æ”¹å˜æ—¶æ‰ä¿å­˜åˆ°æ’¤é”€æ ˆ
                    if (newHtml !== content) {
                        saveToUndoStack(content);
                        onChange(newHtml);
                    }
                    
                    setTimeout(() => setIsUpdatingFromPreview(false), 50);
                }
            }, [onChange, isUpdatingFromCode, content, saveToUndoStack]);

            // ä»¥ä¸‹å‡½æ•°å·²ç¦ç”¨ - ä¸å†è¿›è¡Œé€‰æ‹©å†…å®¹çš„è‡ªåŠ¨æŸ¥è¯¢
            // åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­å±…ä¸­æ˜¾ç¤ºæ–‡æœ¬ - å·²ç¦ç”¨
            // const centerInCodeEditor = useCallback((text) => {
            //     // åŠŸèƒ½å·²ç¦ç”¨
            // }, []);

            // æ¸…é™¤ä»£ç å®šä½ - å·²ç¦ç”¨
            // const clearCodeHighlight = useCallback(() => {
            //     // åŠŸèƒ½å·²ç¦ç”¨
            // }, []);

            // å¤„ç†é€‰æ‹©æ–‡æœ¬å®šä½ - å·²ç¦ç”¨è‡ªåŠ¨æŸ¥è¯¢åŠŸèƒ½
            const handleSelectionChange = useCallback(() => {
                // ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œç”¨æˆ·é€‰æ‹©å†…å®¹æ—¶ä¸è¿›è¡Œè‡ªåŠ¨æŸ¥è¯¢
                return;
            }, []);

            // å¤„ç†é¢„è§ˆåŒºåŸŸç‚¹å‡» - å·²ç¦ç”¨é€‰æ‹©æŸ¥è¯¢åŠŸèƒ½
            const handlePreviewClick = useCallback((e) => {
                // ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œç”¨æˆ·ç‚¹å‡»æ—¶ä¸è¿›è¡Œé€‰æ‹©çŠ¶æ€å¤„ç†
                return;
            }, []);

            // å¤„ç†é¢„è§ˆåŒºåŸŸçš„é”®ç›˜äº‹ä»¶
            const handlePreviewKeyDown = useCallback((e) => {
                // å¤„ç†æ’¤é”€/é‡åšå¿«æ·é”®
                if (e.ctrlKey || e.metaKey) {
                    if (e.key === 'z' && !e.shiftKey) {
                        e.preventDefault();
                        e.stopPropagation();
                        handleUndo();
                        return false;
                    }
                    if ((e.key === 'y') || (e.key === 'z' && e.shiftKey)) {
                        e.preventDefault();
                        e.stopPropagation();
                        handleRedo();
                        return false;
                    }
                    // å…è®¸å…¶ä»–å¿«æ·é”®
                    if (['b', 'i', 'u', 'c', 'v', 'x', 'a'].includes(e.key.toLowerCase())) {
                        return true;
                    }
                }
                
                if (e.key === 'Tab') {
                    e.preventDefault();
                    document.execCommand('insertText', false, '    ');
                    return false;
                }
                
                return true;
            }, [handleUndo, handleRedo]);

            // å¤„ç†ä»£ç ç¼–è¾‘å™¨çš„å˜åŒ–
            const handleCodeChange = useCallback((e) => {
                const newContent = e.target.value;
                // åªæœ‰å½“å†…å®¹çœŸæ­£æ”¹å˜æ—¶æ‰ä¿å­˜åˆ°æ’¤é”€æ ˆ
                if (newContent !== content) {
                    saveToUndoStack(content);
                    onChange(newContent);
                }
            }, [content, onChange, saveToUndoStack]);

            // å¤„ç†é¢„è§ˆåŒºåŸŸçš„ç²˜è´´äº‹ä»¶
            const handlePreviewPaste = useCallback((e) => {
                e.preventDefault();
                const text = e.clipboardData.getData('text/plain');
                document.execCommand('insertText', false, text);
            }, []);

            // æ¸…ç†å®šæ—¶å™¨
            useEffect(() => {
                return () => {
                    if (saveTimeout) {
                        clearTimeout(saveTimeout);
                    }
                };
            }, [saveTimeout]);

            // å…¨å±€é”®ç›˜äº‹ä»¶ç›‘å¬å™¨ - å¤„ç†ä»£ç ç¼–è¾‘å™¨çš„æ’¤é”€é‡åš
            useEffect(() => {
                const handleGlobalKeyDown = (e) => {
                    // åªåœ¨ä»£ç ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹æ—¶å¤„ç†
                    if (document.activeElement === codeRef.current) {
                        if (e.ctrlKey || e.metaKey) {
                            if (e.key === 'z' && !e.shiftKey) {
                                e.preventDefault();
                                e.stopPropagation();
                                handleUndo();
                                return false;
                            }
                            if ((e.key === 'y') || (e.key === 'z' && e.shiftKey)) {
                                e.preventDefault();
                                e.stopPropagation();
                                handleRedo();
                                return false;
                            }
                        }
                    }
                };

                document.addEventListener('keydown', handleGlobalKeyDown, true);
                return () => {
                    document.removeEventListener('keydown', handleGlobalKeyDown, true);
                };
            }, [handleUndo, handleRedo]);

            // ç›‘å¬é€‰æ‹©å˜åŒ– - å·²ç¦ç”¨
            // useEffect(() => {
            //     document.addEventListener('selectionchange', handleSelectionChange);
            //     return () => {
            //         document.removeEventListener('selectionchange', handleSelectionChange);
            //     };
            // }, [handleSelectionChange]);

            // æ·»åŠ æ‹–æ‹½æ»šåŠ¨åŠŸèƒ½
            useEffect(() => {
                const previewElement = previewRef.current;
                if (!previewElement) return;

                let isMouseDown = false;
                let startX, startY, scrollLeft, scrollTop;

                const handleMouseDown = (e) => {
                    // åªåœ¨æŒ‰ä½Shifté”®æ—¶å¯ç”¨æ‹–æ‹½æ»šåŠ¨
                    if (!e.shiftKey) return;
                    
                    isMouseDown = true;
                    startX = e.pageX - previewElement.offsetLeft;
                    startY = e.pageY - previewElement.offsetTop;
                    scrollLeft = previewElement.scrollLeft;
                    scrollTop = previewElement.scrollTop;
                    previewElement.style.cursor = 'grabbing';
                    e.preventDefault();
                };

                const handleMouseLeave = () => {
                    isMouseDown = false;
                    previewElement.style.cursor = 'text';
                };

                const handleMouseUp = () => {
                    isMouseDown = false;
                    previewElement.style.cursor = 'text';
                };

                const handleMouseMove = (e) => {
                    if (!isMouseDown || !e.shiftKey) return;
                    e.preventDefault();
                    
                    const x = e.pageX - previewElement.offsetLeft;
                    const y = e.pageY - previewElement.offsetTop;
                    const walkX = (x - startX) * 2;
                    const walkY = (y - startY) * 2;
                    
                    previewElement.scrollLeft = scrollLeft - walkX;
                    previewElement.scrollTop = scrollTop - walkY;
                };

                previewElement.addEventListener('mousedown', handleMouseDown);
                previewElement.addEventListener('mouseleave', handleMouseLeave);
                previewElement.addEventListener('mouseup', handleMouseUp);
                previewElement.addEventListener('mousemove', handleMouseMove);

                return () => {
                    previewElement.removeEventListener('mousedown', handleMouseDown);
                    previewElement.removeEventListener('mouseleave', handleMouseLeave);
                    previewElement.removeEventListener('mouseup', handleMouseUp);
                    previewElement.removeEventListener('mousemove', handleMouseMove);
                };
            }, []);

            return (
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 h-full" style={{ minHeight: '600px' }}>
                    <div className="flex flex-col">
                        <div className="flex items-center justify-between mb-3">
                            <h3 className="text-xl font-semibold text-aws-primary">HTML ç¼–è¾‘</h3>
                            <div className="flex items-center space-x-2">
                                <span className="text-sm text-gray-500">
                                    æ’¤é”€: {undoStack.length} | é‡åš: {redoStack.length}
                                </span>
                            </div>
                        </div>
                        <textarea
                            ref={codeRef}
                            className="html-editor flex-1"
                            value={content}
                            onChange={handleCodeChange}
                            placeholder="åœ¨è¿™é‡Œè¾“å…¥HTMLå†…å®¹..."
                            style={{
                                minHeight: '500px',
                                fontSize: '14px',
                                lineHeight: '1.5',
                                fontFamily: 'Monaco, Menlo, "Ubuntu Mono", monospace'
                            }}
                        />
                    </div>
                    <div className="flex flex-col">
                        <div className="flex items-center justify-between mb-3">
                            <h3 className="text-xl font-semibold text-aws-primary">å¯è§†åŒ–ç¼–è¾‘</h3>
                            <div className="flex items-center space-x-2">
                                <span className="text-sm text-gray-600">ğŸ’¡ å¯ç›´æ¥ç¼–è¾‘</span>
                                <span className="text-sm text-gray-600">ğŸ–±ï¸ Shift+æ‹–æ‹½æ»šåŠ¨</span>
                            </div>
                        </div>
                        <div 
                            ref={previewRef}
                            className="preview-panel flex-1"
                            contentEditable={true}
                            suppressContentEditableWarning={true}
                            onInput={handlePreviewEdit}
                            onKeyDown={handlePreviewKeyDown}
                            onPaste={handlePreviewPaste}
                            onClick={handlePreviewClick}
                            style={{ 
                                minHeight: '500px',
                                maxHeight: '700px',
                                overflowY: 'auto',
                                overflowX: 'auto',
                                outline: 'none',
                                cursor: 'text',
                                resize: 'both',
                                border: '2px solid #d1d5db',
                                borderRadius: '8px',
                                padding: '16px',
                                backgroundColor: 'white'
                            }}
                        />
                        
                        {/* ç¼–è¾‘å·¥å…·æ  */}
                        <div className="edit-toolbar" style={{
                            marginTop: '12px',
                            padding: '12px',
                            backgroundColor: '#f9f9f9',
                            borderRadius: '8px',
                            display: 'flex',
                            gap: '8px',
                            flexWrap: 'wrap',
                            border: '1px solid #e5e7eb'
                        }}>
                            <button
                                onClick={() => document.execCommand('bold')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer',
                                    fontWeight: 'bold'
                                }}
                                title="åŠ ç²— (Ctrl+B)"
                            >
                                <strong>B</strong>
                            </button>
                            <button
                                onClick={() => document.execCommand('italic')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ–œä½“ (Ctrl+I)"
                            >
                                <em>I</em>
                            </button>
                            <button
                                onClick={() => document.execCommand('underline')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="ä¸‹åˆ’çº¿ (Ctrl+U)"
                            >
                                <u>U</u>
                            </button>
                            <button
                                onClick={() => {
                                    const url = prompt('è¯·è¾“å…¥é“¾æ¥åœ°å€:');
                                    if (url) document.execCommand('createLink', false, url);
                                }}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ’å…¥é“¾æ¥"
                            >
                                ğŸ”— é“¾æ¥
                            </button>
                            <button
                                onClick={() => document.execCommand('formatBlock', false, 'h1')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ ‡é¢˜1"
                            >
                                H1
                            </button>
                            <button
                                onClick={() => document.execCommand('formatBlock', false, 'h2')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ ‡é¢˜2"
                            >
                                H2
                            </button>
                            <button
                                onClick={() => document.execCommand('insertUnorderedList')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ— åºåˆ—è¡¨"
                            >
                                â€¢ åˆ—è¡¨
                            </button>
                            <button
                                onClick={() => document.execCommand('insertOrderedList')}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æœ‰åºåˆ—è¡¨"
                            >
                                1. åˆ—è¡¨
                            </button>
                            <button
                                onClick={() => {
                                    const color = prompt('è¯·è¾“å…¥é¢œè‰² (å¦‚: red, #ff0000):');
                                    if (color) document.execCommand('foreColor', false, color);
                                }}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: 'white',
                                    border: '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                }}
                                title="æ–‡å­—é¢œè‰²"
                            >
                                ğŸ¨ é¢œè‰²
                            </button>
                            <button
                                onClick={handleUndo}
                                disabled={undoStack.length === 0}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: undoStack.length === 0 ? '#f5f5f5' : 'white',
                                    color: undoStack.length === 0 ? '#999' : '#333',
                                    border: undoStack.length === 0 ? '1px solid #e5e7eb' : '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: undoStack.length === 0 ? 'not-allowed' : 'pointer',
                                    opacity: undoStack.length === 0 ? 0.5 : 1,
                                    transition: 'all 0.2s ease'
                                }}
                                title={`æ’¤é”€ (Ctrl+Z) - ${undoStack.length} ä¸ªå¯æ’¤é”€æ“ä½œ`}
                            >
                                â†¶ æ’¤é”€ ({undoStack.length})
                            </button>
                            <button
                                onClick={handleRedo}
                                disabled={redoStack.length === 0}
                                style={{
                                    padding: '6px 12px',
                                    fontSize: '14px',
                                    backgroundColor: redoStack.length === 0 ? '#f5f5f5' : 'white',
                                    color: redoStack.length === 0 ? '#999' : '#333',
                                    border: redoStack.length === 0 ? '1px solid #e5e7eb' : '1px solid #d1d5db',
                                    borderRadius: '6px',
                                    cursor: redoStack.length === 0 ? 'not-allowed' : 'pointer',
                                    opacity: redoStack.length === 0 ? 0.5 : 1,
                                    transition: 'all 0.2s ease'
                                }}
                                title={`é‡åš (Ctrl+Y) - ${redoStack.length} ä¸ªå¯é‡åšæ“ä½œ`}
                            >
                                â†· é‡åš ({redoStack.length})
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // ä¸»åº”ç”¨ç»„ä»¶
        const App = () => {
            const [mode, setMode] = useState('markdown');
            const [markdownContent, setMarkdownContent] = useState(`# æ¬¢è¿ä½¿ç”¨ Markdown-HTML åŒå‘ç¼–è¾‘å™¨

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åœ¨çº¿ç¼–è¾‘å™¨ï¼Œæ”¯æŒï¼š

## ä¸»è¦åŠŸèƒ½

- **Markdownç¼–è¾‘**: æ”¯æŒè¯­æ³•é«˜äº®å’Œå®æ—¶é¢„è§ˆ
- **HTMLç¼–è¾‘**: å¯è§†åŒ–HTMLç¼–è¾‘å’Œé¢„è§ˆ
- **åŒå‘è½¬æ¢**: Markdown â†” HTML æ— ç¼è½¬æ¢
- **æ–‡ä»¶æ“ä½œ**: å¯¼å…¥å¯¼å‡º .md å’Œ .html æ–‡ä»¶

## ä½¿ç”¨æ–¹æ³•

1. ç‚¹å‡»ä¸Šæ–¹çš„ **ğŸ“ Markdown** æˆ– **ğŸŒ HTML** åˆ‡æ¢ç¼–è¾‘æ¨¡å¼
2. åœ¨å·¦ä¾§ç¼–è¾‘åŒºåŸŸè¾“å…¥å†…å®¹ï¼Œå³ä¾§ä¼šå®æ—¶æ˜¾ç¤ºé¢„è§ˆ
3. ä½¿ç”¨ **ğŸ“ å¯¼å…¥** æŒ‰é’®åŠ è½½æœ¬åœ°æ–‡ä»¶
4. ä½¿ç”¨ **ğŸ’¾ ä¿å­˜** æˆ– **ğŸ“¤ å¯¼å‡º** æŒ‰é’®ä¿å­˜æ‚¨çš„å·¥ä½œ

## ç¤ºä¾‹å†…å®¹

### ä»£ç å—
\`\`\`javascript
function hello() {
    console.log("Hello, World!");
}
\`\`\`

### è¡¨æ ¼
| åŠŸèƒ½ | æ”¯æŒ |
|------|------|
| Markdown | âœ… |
| HTML | âœ… |
| å®æ—¶é¢„è§ˆ | âœ… |

### åˆ—è¡¨
- é¡¹ç›® 1
- é¡¹ç›® 2
  - å­é¡¹ç›® 2.1
  - å­é¡¹ç›® 2.2

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼**`);
            
            const [htmlContent, setHtmlContent] = useState('');

            // åˆå§‹åŒ–HTMLå†…å®¹ - ä¸°å¯Œå¤šå½©çš„æ¼”ç¤ºå†…å®¹
            useEffect(() => {
                const demoHtml = `<!DOCTYPE html>
<html>
<head>
    <style>
        .demo-container {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .title {
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            font-style: italic;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }
        .feature-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        .demo-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,107,107,0.6);
        }
        .btn-secondary {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
            box-shadow: 0 4px 15px rgba(78,205,196,0.4);
        }
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78,205,196,0.6);
        }
        .btn-accent {
            background: linear-gradient(45deg, #A8E6CF, #7FCDCD);
            color: #2c3e50;
            box-shadow: 0 4px 15px rgba(168,230,207,0.4);
        }
        .demo-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            overflow: hidden;
        }
        .demo-table th {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }
        .demo-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .demo-table tr:nth-child(even) {
            background: rgba(255,255,255,0.05);
        }
        .demo-table tr:hover {
            background: rgba(255,255,255,0.1);
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .status-active {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
        }
        .status-pending {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }
        .highlight-box {
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.2));
            border-left: 5px solid #FFD700;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            backdrop-filter: blur(5px);
        }
        .text-effects {
            margin: 20px 0;
            text-align: center;
        }
        .rainbow-text {
            background: linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.5em;
            font-weight: bold;
            animation: rainbow 3s ease-in-out infinite;
        }
        @keyframes rainbow {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(180deg); }
        }
        .glow-text {
            color: #fff;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff;
            font-size: 1.3em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="header">
            <h1 class="title">ğŸ¨ HTML å¯è§†åŒ–ç¼–è¾‘å™¨</h1>
            <p class="subtitle">ä½“éªŒä¸°å¯Œå¤šå½©çš„æ‰€è§å³æ‰€å¾—ç¼–è¾‘åŠŸèƒ½</p>
        </div>

        <div class="highlight-box">
            <h3>âœ¨ æ¬¢è¿ä½“éªŒï¼</h3>
            <p>è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„HTMLç¼–è¾‘å™¨ï¼Œæ”¯æŒ<strong>å®æ—¶ç¼–è¾‘</strong>ã€<em>æ ·å¼ä¿æŒ</em>å’Œ<u>æ ¼å¼åŒ–å·¥å…·</u>ã€‚ä½ å¯ä»¥ç›´æ¥ç‚¹å‡»ä»»ä½•å†…å®¹è¿›è¡Œç¼–è¾‘ï¼Œæ‰€æœ‰æ ·å¼éƒ½ä¼šå®Œç¾ä¿æŒï¼</p>
        </div>

        <div class="feature-grid">
            <div class="feature-card">
                <span class="feature-icon">ğŸ¨</span>
                <div class="feature-title">ä¸°å¯Œæ ·å¼</div>
                <p>æ”¯æŒæ¸å˜èƒŒæ™¯ã€é˜´å½±æ•ˆæœã€åŠ¨ç”»å’Œå„ç§CSS3ç‰¹æ€§</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">âœï¸</span>
                <div class="feature-title">å®æ—¶ç¼–è¾‘</div>
                <p>ç›´æ¥åœ¨é¢„è§ˆåŒºåŸŸç¼–è¾‘ï¼Œç«‹å³çœ‹åˆ°æ•ˆæœï¼Œæ— éœ€åˆ·æ–°</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">ğŸ› ï¸</span>
                <div class="feature-title">å·¥å…·æ </div>
                <p>å¿«é€Ÿæ ¼å¼åŒ–å·¥å…·ï¼ŒåŒ…æ‹¬ç²—ä½“ã€æ–œä½“ã€é¢œè‰²ç­‰</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">ğŸ”„</span>
                <div class="feature-title">ä»£ç åŒæ­¥</div>
                <p>å¯è§†åŒ–ç¼–è¾‘ä¸HTMLä»£ç å®æ—¶åŒå‘åŒæ­¥</p>
            </div>
        </div>

        <div class="text-effects">
            <div class="rainbow-text">ğŸŒˆ å½©è™¹æ¸å˜æ–‡å­—æ•ˆæœ</div>
            <br>
            <div class="glow-text">âœ¨ å‘å…‰æ–‡å­—æ•ˆæœ</div>
        </div>

        <div class="demo-buttons">
            <button class="btn btn-primary">ä¸»è¦æŒ‰é’®</button>
            <button class="btn btn-secondary">æ¬¡è¦æŒ‰é’®</button>
            <button class="btn btn-accent">å¼ºè°ƒæŒ‰é’®</button>
        </div>

        <table class="demo-table">
            <thead>
                <tr>
                    <th>åŠŸèƒ½ç‰¹æ€§</th>
                    <th>æ”¯æŒçŠ¶æ€</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ğŸ¨ CSSæ ·å¼</td>
                    <td><span class="status-badge status-active">âœ… å®Œå…¨æ”¯æŒ</span></td>
                    <td>æ¸å˜ã€é˜´å½±ã€åŠ¨ç”»ç­‰</td>
                </tr>
                <tr>
                    <td>ğŸ–±ï¸ ç›´æ¥ç¼–è¾‘</td>
                    <td><span class="status-badge status-active">âœ… å®Œå…¨æ”¯æŒ</span></td>
                    <td>ç‚¹å‡»å³å¯ç¼–è¾‘å†…å®¹</td>
                </tr>
                <tr>
                    <td>ğŸ”§ å·¥å…·æ </td>
                    <td><span class="status-badge status-active">âœ… å®Œå…¨æ”¯æŒ</span></td>
                    <td>å¿«é€Ÿæ ¼å¼åŒ–å·¥å…·</td>
                </tr>
                <tr>
                    <td>ğŸ“± å“åº”å¼</td>
                    <td><span class="status-badge status-pending">ğŸ”„ å¼€å‘ä¸­</span></td>
                    <td>ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–</td>
                </tr>
            </tbody>
        </table>

        <div class="highlight-box">
            <h3>ğŸš€ å¼€å§‹ç¼–è¾‘</h3>
            <p>ç‚¹å‡»é¡µé¢ä¸Šçš„ä»»ä½•æ–‡å­—å¼€å§‹ç¼–è¾‘ï¼Œä½¿ç”¨ä¸‹æ–¹çš„å·¥å…·æ å¿«é€Ÿæ ¼å¼åŒ–æ–‡æœ¬ã€‚ä½ ä¼šå‘ç°æ‰€æœ‰çš„é¢œè‰²ã€èƒŒæ™¯ã€åŠ¨ç”»æ•ˆæœéƒ½å®Œç¾ä¿æŒï¼</p>
            <p><strong>æç¤ºï¼š</strong>è¯•è¯•é€‰ä¸­æ–‡å­—åç‚¹å‡»å·¥å…·æ çš„é¢œè‰²æŒ‰é’®ï¼Œæˆ–è€…ç›´æ¥è¾“å…¥æ–°å†…å®¹ã€‚</p>
        </div>
    </div>
</body>
</html>`;
                setHtmlContent(demoHtml);
            }, []);

            const handleModeChange = useCallback((newMode) => {
                // ç®€å•åˆ‡æ¢æ¨¡å¼ï¼Œä¸è¿›è¡Œå†…å®¹è½¬æ¢
                setMode(newMode);
            }, []);

            const handleSave = useCallback(() => {
                const content = mode === 'markdown' ? markdownContent : htmlContent;
                const filename = mode === 'markdown' ? 'document.md' : 'document.html';
                const type = mode === 'markdown' ? 'text/markdown' : 'text/html';
                
                FileOperations.saveFile(content, filename, type);
            }, [mode, markdownContent, htmlContent]);

            const handleLoad = useCallback((content, fileMode) => {
                if (fileMode === 'html') {
                    setHtmlContent(content);
                    setMode('html');
                } else {
                    setMarkdownContent(content);
                    setMode('markdown');
                }
            }, []);

            const handleExport = useCallback(() => {
                if (mode === 'markdown') {
                    // å¯¼å‡ºHTMLç‰ˆæœ¬
                    const html = ConversionEngine.markdownToHtml(markdownContent);
                    FileOperations.saveFile(html, 'document.html', 'text/html');
                } else {
                    // å¯¼å‡ºMarkdownç‰ˆæœ¬
                    const markdown = ConversionEngine.htmlToMarkdown(htmlContent);
                    FileOperations.saveFile(markdown, 'document.md', 'text/markdown');
                }
            }, [mode, markdownContent, htmlContent]);

            return (
                <div className="min-h-screen bg-aws-light">
                    <Toolbar 
                        mode={mode}
                        onModeChange={handleModeChange}
                        onSave={handleSave}
                        onLoad={handleLoad}
                        onExport={handleExport}
                        markdownContent={markdownContent}
                        htmlContent={htmlContent}
                        setMarkdownContent={setMarkdownContent}
                        setHtmlContent={setHtmlContent}
                    />
                    
                    <div className="p-6">
                        <div className="editor-container">
                            {mode === 'markdown' ? (
                                <MarkdownEditor 
                                    content={markdownContent}
                                    onChange={setMarkdownContent}
                                />
                            ) : (
                                <HTMLEditor 
                                    content={htmlContent}
                                    onChange={setHtmlContent}
                                />
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // æ¸²æŸ“åº”ç”¨
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>